{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/js/category-sidebar.js","../src/js/refs.js","../src/js/markup.js","../src/js/content-home.js"],"sourcesContent":["const BASE_URL = 'https://books-backend.p.goit.global/books';\n\nconst API_OPTIONS = {\n  list: 'category-list',\n  top: 'top-books',\n  category: 'category?category=',\n};\n\nasync function fetchBookList(option, select = '') {\n  try {\n    const response = await fetch(`${BASE_URL}/${option}${select}`);\n    const list = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return list;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n  }\n}\n\nasync function fetchBookById(bookId) {\n  try {\n    const response = await fetch(`${BASE_URL}/${bookId}`);\n    const book = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return book;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n  }\n}\n\nexport default { API_OPTIONS, fetchBookList, fetchBookById };\n","import api from './books-api';\n// import { API_OPTIONS, fetchBookList } from './books-api';\nconst ctgList = document.querySelector('.ctg-list');\n\napi.fetchBookList(api.API_OPTIONS.list).then(response => {\n  const markup = response\n    .map(\n      ({\n        list_name,\n      }) => `<li class=\"ctg-item js-ctg-item\" data-ctg-name = ${list_name}>${list_name}\n          </li>`\n    )\n    .join('');\n\n  ctgList.insertAdjacentHTML('beforeend', markup);\n});\n","export default function getRefs() {\n  return {\n    // home page wrapper for dynamically rendered book collections\n    bookCollectionWrapper: document.querySelector('.book-collection-wrapper'),\n  };\n}\n","import getRefs from './refs';\nconst refs = getRefs();\n\n// top book (bestsellers) collection rendering function\n\nfunction markupCategoryBlock(category) {\n  const bookCard = category.books\n    .map(\n      book => `<li class=\"book-card\">\n            <a class=\"book-link\" href=\"\">\n              <img\n                src=\"${book.book_image}\"\n                alt=\"book image\"\n                width=\"100%\"\n                loading=\"lazy\"\n              />\n              <div class=\"info\">\n                <p class=\"book-title\">\n                  ${book.title}\n                </p>\n                <p class=\"book-author\">\n                  ${book.author}\n                </p>\n              </div>\n            </a>\n          </li>`\n    )\n    .join('');\n  return `<div class=\"category-block\">\n            <h3>${category.list_name}</h3>\n            <ul class=\"category-books\">\n            ${bookCard}\n            </ul>\n            <button>more</button>\n          </div>`;\n}\n\nfunction insertCategoryBlocks(category) {\n  return refs.bookCollectionWrapper.insertAdjacentHTML(\n    'beforeend',\n    markupCategoryBlock(category)\n  );\n}\n\nexport default { insertCategoryBlocks };\n","import api from './books-api';\nimport markup from './markup';\n\nasync function topBooks() {\n  const topBooks = await api.fetchBookList(api.API_OPTIONS.top);\n  console.log(topBooks);\n  topBooks.forEach(markup.insertCategoryBlocks);\n}\n\ntopBooks();\n\n// const homeSection = document.querySelector('.home-container');\nconst allCtg = document.querySelector('.js-ctg-heading');\nconst ctgList = document.querySelector('.ctg-list');\nconst ctgName = document.querySelector('.selected-ctg-name');\nconst wrapper = document.querySelector('.book-collection-wrapper');\nconsole.log(ctgName);\n// import { API_OPTIONS, fetchBookList } from './books-api';\n\nctgList.addEventListener('click', selectCtg);\nallCtg.addEventListener('click', renderTopBooks);\n\nfunction renderTopBooks() {\n  wrapper.innerHTML = '';\n  topBooks();\n}\n\nfunction selectCtg(evt) {\n  const selectedCategory = evt.target.childNodes[0].data;\n\n  api\n    .fetchBookList(api.API_OPTIONS.category, selectedCategory)\n    .then(response => {\n      ctgName.innerHTML = '';\n      wrapper.innerHTML = '';\n      const markup = response\n        .map(\n          ({ book_image, author, title }) => `<div class=\"ctg-top-books\">\n\n  <div class=\"ctg-book-card\">\n    <img class = 'ctg-book-image' src=\"${book_image}\" alt=\"${title}\" />\n    <div class = 'ctg-book-text'>\n    <h3 class=\"ctg-book-name\">${title}</h3>\n    <h4 class=\"ctg-book-author\">${author}</h4>\n    </div>\n  </div>\n</div>\n`\n        )\n        .join('');\n      ctgName.insertAdjacentHTML('afterbegin', selectedCategory);\n      wrapper.insertAdjacentHTML('beforeend', markup);\n    });\n}\n"],"names":["BASE_URL","API_OPTIONS","fetchBookList","option","select","response","list","error","fetchBookById","bookId","book","api","ctgList","markup","list_name","getRefs","refs","markupCategoryBlock","category","bookCard","insertCategoryBlocks","topBooks","allCtg","ctgName","wrapper","selectCtg","renderTopBooks","evt","selectedCategory","book_image","author","title"],"mappings":"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"}