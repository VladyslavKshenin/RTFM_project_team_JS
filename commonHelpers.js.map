{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/js/category-sidebar.js","../src/js/content-home.js"],"sourcesContent":["const BASE_URL = 'https://books-backend.p.goit.global/books';\n\nconst API_OPTIONS = {\n  list: 'category-list',\n  top: 'top-books',\n  category: 'category?category=',\n};\n\nasync function fetchBookList(option, select = '') {\n  try {\n    const response = await fetch(`${BASE_URL}/${option}${select}`);\n    const list = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return list;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n  }\n}\n\nasync function fetchBookById(bookId) {\n  try {\n    const response = await fetch(`${BASE_URL}/${bookId}`);\n    const book = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return book;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n  }\n}\n\nexport default { API_OPTIONS, fetchBookList, fetchBookById };\n","import api from './books-api';\n\nconst ctgList = document.querySelector('.ctg-list');\n\napi.fetchBookList(api.API_OPTIONS.list).then(response => {\n  const markup = response\n    .map(\n      ({\n        list_name,\n      }) => `<li class=\"ctg-item js-ctg-item \" data-ctg-name = ${list_name}>${list_name}\n          </li>`\n    )\n    .join('');\n\n  ctgList.insertAdjacentHTML('beforeend', markup);\n});\n","import api from './books-api';\nimport markup from './markup';\nimport getRefs from './refs';\n\nconst refs = getRefs();\n\napi.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n\nfunction highlightMenuActiveCategory(event) {\n  [...refs.ctgList.children].forEach(li =>\n    li.classList.remove('ctg-item-active')\n  );\n  if (refs.ctgList.contains(event.target)) {\n    event.target.classList.add('ctg-item-active');\n  } else {\n    const match = [...refs.ctgList.children].find(\n      li => li.textContent.trim() === event.target.dataset.category\n    );\n    match.classList.add('ctg-item-active');\n  }\n}\n\nfunction showSelectedCategoryBooks(event) {\n  const selectedCategory = event.target.childNodes[0].data;\n  highlightMenuActiveCategory(event);\n  if (selectedCategory !== 'All categories') {\n    api\n      .fetchBookList(api.API_OPTIONS.category, selectedCategory)\n      .then(markup.renderCategoryBooks);\n  } else {\n    api.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n  }\n}\n\nfunction showMoreCategoryBooks(event) {\n  if (!event.target.classList.contains('top-books-button')) {\n    return;\n  }\n  const category = event.target.dataset.category;\n  highlightMenuActiveCategory(event);\n  api\n    .fetchBookList(api.API_OPTIONS.category, category)\n    .then(markup.renderCategoryBooks);\n}\n\nrefs.ctgList.addEventListener('click', showSelectedCategoryBooks);\nrefs.bookCollectionWrapper.addEventListener('click', showMoreCategoryBooks);\n"],"names":["BASE_URL","API_OPTIONS","fetchBookList","option","select","response","list","error","fetchBookById","bookId","book","api","ctgList","markup","list_name","refs","getRefs","highlightMenuActiveCategory","event","li","showSelectedCategoryBooks","selectedCategory","showMoreCategoryBooks","category"],"mappings":"2DAAA,MAAMA,EAAW,4CAEXC,EAAc,CAClB,KAAM,gBACN,IAAK,YACL,SAAU,oBACZ,EAEA,eAAeC,EAAcC,EAAQC,EAAS,GAAI,CAChD,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,GAAGL,KAAYG,IAASC,GAAQ,EACvDE,EAAO,MAAMD,EAAS,OAC5B,eAAQ,IACN,mCAAmCA,EAAS,YAAYA,EAAS,YACvE,EACWC,CACR,OAAQC,EAAP,CACA,QAAQ,IAAI,sBAAsBA,EAAM,SAAS,CAClD,CACH,CAEA,eAAeC,EAAcC,EAAQ,CACnC,GAAI,CACF,MAAMJ,EAAW,MAAM,MAAM,GAAGL,KAAYS,GAAQ,EAC9CC,EAAO,MAAML,EAAS,OAC5B,eAAQ,IACN,mCAAmCA,EAAS,YAAYA,EAAS,YACvE,EACWK,CACR,OAAQH,EAAP,CACA,QAAQ,IAAI,sBAAsBA,EAAM,SAAS,CAClD,CACH,CAEA,MAAAI,EAAe,CAAE,YAAAV,EAAa,cAAAC,EAAe,cAAAM,CAAe,EChCtDI,EAAU,SAAS,cAAc,WAAW,EAElDD,EAAI,cAAcA,EAAI,YAAY,IAAI,EAAE,KAAKN,GAAY,CACvD,MAAMQ,EAASR,EACZ,IACC,CAAC,CACC,UAAAS,CACD,IAAK,qDAAqDA,KAAaA;AAAA,gBAEzE,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAAC,ECXD,MAAME,EAAOC,EAAO,EAEpBL,EAAI,cAAcA,EAAI,YAAY,GAAG,EAAE,KAAKE,EAAO,cAAc,EAEjE,SAASI,EAA4BC,EAAO,CAC1C,CAAC,GAAGH,EAAK,QAAQ,QAAQ,EAAE,QAAQI,GACjCA,EAAG,UAAU,OAAO,iBAAiB,CACzC,EACMJ,EAAK,QAAQ,SAASG,EAAM,MAAM,EACpCA,EAAM,OAAO,UAAU,IAAI,iBAAiB,EAE9B,CAAC,GAAGH,EAAK,QAAQ,QAAQ,EAAE,KACvCI,GAAMA,EAAG,YAAY,KAAM,IAAKD,EAAM,OAAO,QAAQ,QAC3D,EACU,UAAU,IAAI,iBAAiB,CAEzC,CAEA,SAASE,EAA0BF,EAAO,CACxC,MAAMG,EAAmBH,EAAM,OAAO,WAAW,GAAG,KACpDD,EAA4BC,CAAK,EAC7BG,IAAqB,iBACvBV,EACG,cAAcA,EAAI,YAAY,SAAUU,CAAgB,EACxD,KAAKR,EAAO,mBAAmB,EAElCF,EAAI,cAAcA,EAAI,YAAY,GAAG,EAAE,KAAKE,EAAO,cAAc,CAErE,CAEA,SAASS,EAAsBJ,EAAO,CACpC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,kBAAkB,EACrD,OAEF,MAAMK,EAAWL,EAAM,OAAO,QAAQ,SACtCD,EAA4BC,CAAK,EACjCP,EACG,cAAcA,EAAI,YAAY,SAAUY,CAAQ,EAChD,KAAKV,EAAO,mBAAmB,CACpC,CAEAE,EAAK,QAAQ,iBAAiB,QAASK,CAAyB,EAChEL,EAAK,sBAAsB,iBAAiB,QAASO,CAAqB"}