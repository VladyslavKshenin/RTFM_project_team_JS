{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/js/category-sidebar.js","../src/js/refs.js","../src/js/markup.js","../src/js/content-home.js"],"sourcesContent":["const BASE_URL = 'https://books-backend.p.goit.global/books';\n\nconst API_OPTIONS = {\n  list: 'category-list',\n  top: 'top-books',\n  category: 'category?category=',\n};\n\nasync function fetchBookList(option, select = '') {\n  try {\n    const response = await fetch(`${BASE_URL}/${option}${select}`);\n    const list = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return list;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n  }\n}\n\nasync function fetchBookById(bookId) {\n  try {\n    const response = await fetch(`${BASE_URL}/${bookId}`);\n    const book = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return book;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n  }\n}\n\nexport default { API_OPTIONS, fetchBookList, fetchBookById };\n","import api from './books-api';\n// import { API_OPTIONS, fetchBookList } from './books-api';\nconst ctgList = document.querySelector('.ctg-list');\n\napi.fetchBookList(api.API_OPTIONS.list).then(response => {\n  const markup = response\n    .map(\n      ({\n        list_name,\n      }) => `<li class=\"ctg-item js-ctg-item\" data-ctg-name = ${list_name}>${list_name}\n          </li>`\n    )\n    .join('');\n\n  ctgList.insertAdjacentHTML('beforeend', markup);\n});\n","export default function getRefs() {\n  return {\n    // home page wrapper for dynamically rendered book collections\n    bookCollectionWrapper: document.querySelector('.book-collection-wrapper'),\n    //category sidebar\n    ctgList: document.querySelector('.ctg-list'),\n    ctgName: document.querySelector('.selected-ctg-name'),\n  };\n}\n","import getRefs from './refs';\n\nconst refs = getRefs();\n\n// top books (bestsellers) and category books collection rendering functions\n\nfunction markupCategoryBlock(category) {\n  const bookCard = category.books\n    .map(\n      book => `<li class=\"top-book-card\">\n            <a class=\"book-link\" href=\"\">\n              <img class=\"book-img\"\n                src=\"${book.book_image}\"\n                alt=\"book image\"\n                width=\"100%\"\n                loading=\"lazy\"\n              />\n              <div class=\"book-info\">\n                <h3 class=\"book-title\">\n                  ${book.title}\n                </h3>\n                <p class=\"book-author\">\n                  ${book.author}\n                </p>\n              </div>\n            </a>\n          </li>`\n    )\n    .join('');\n  return `<div class=\"top-books-block\">\n            <h2 class=\"top-books-category-header\">${category.list_name}</h2>\n            <ul class=\"top-books-category\">\n            ${bookCard}\n            </ul>\n            <button class=\"top-books-button\" type=\"button\" data-category=\"${category.list_name}\">see more</button>\n          </div>`;\n}\n\nfunction markupCategoryCollection(books) {\n  const bookCard = books\n    .map(\n      book => `<li class=\"category-book-card\">\n            <a class=\"book-link\" href=\"\">\n              <img class=\"book-img\"\n                src=\"${book.book_image}\"\n                alt=\"book image\"\n                width=\"100%\"\n                loading=\"lazy\"\n              />\n              <div class=\"book-info\">\n                <h3 class=\"book-title\">\n                  ${book.title}\n                </h3>\n                <p class=\"book-author\">\n                  ${book.author}\n                </p>\n              </div>\n            </a>\n          </li>`\n    )\n    .join('');\n  return `<ul class=\"category-books\">\n            ${bookCard}\n            </ul>`;\n}\n\nfunction insertCategoryBlocks(category) {\n  return refs.bookCollectionWrapper.insertAdjacentHTML(\n    'beforeend',\n    markupCategoryBlock(category)\n  );\n}\n\nfunction insertCategoryCollection(category) {\n  return refs.bookCollectionWrapper.insertAdjacentHTML(\n    'beforeend',\n    markupCategoryCollection(category)\n  );\n}\n\nfunction insertTopBooksHeader() {\n  refs.bookCollectionWrapper.insertAdjacentHTML(\n    'afterbegin',\n    `<h1 class=\"books-header\">Best Sellers <span class=\"books-accent\">Books</span></h1>`\n  );\n}\n\nfunction insertCategoryBooksHeader(books) {\n  const words = books[0].list_name.split(' ');\n  const lastWord = words.pop();\n  const header =\n    words.join(' ') + ` <span class=\"books-accent\">${lastWord}</span>`;\n  refs.bookCollectionWrapper.insertAdjacentHTML(\n    'afterbegin',\n    `<h1 class=\"books-header\">${header}</h1>`\n  );\n}\n\nfunction cleanBookCollection() {\n  refs.bookCollectionWrapper.innerHTML = '';\n}\n\nfunction renderTopBooks(books) {\n  console.log(books);\n  cleanBookCollection();\n  books.forEach(insertCategoryBlocks);\n  insertTopBooksHeader();\n}\n\nfunction renderCategoryBooks(books) {\n  console.log(books);\n  cleanBookCollection();\n  insertCategoryCollection(books);\n  insertCategoryBooksHeader(books);\n}\n\n// Support Ukraine\n// export function createMarkup(arr) {\n//   return arr\n//     .map(\n//       ({ id, title, url, img, img2x }) => `\n//         <li class=\"support-items\">\n//           <a class=\"support-link\" href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n//             <span>0${id}</span>\n//             <img class=\"support-img\" src=\"./images/support/${img}\" srcset=\"./images/support/${img} 1x, ./images/support/${img2x} 2x\" alt=\"${title}\" >\n//           </a>\n//         </li>\n//         `\n//     )\n//     .join('');\n// } //srcset=\"${img} 1x, ${img2x} 2x\" height=\"32\" './images/support/img-1@1x.png'\n\n\nexport default { renderTopBooks, renderCategoryBooks, insertCategoryBlocks };\n\n\n\n","import api from './books-api';\nimport markup from './markup';\nimport getRefs from './refs';\n\nconst refs = getRefs();\n\napi.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n\nfunction showSelectedCategoryBooks(event) {\n  const selectedCategory = event.target.childNodes[0].data;\n  console.dir(event.target);\n  console.log(selectedCategory);\n  if (selectedCategory !== 'All categories') {\n    api\n      .fetchBookList(api.API_OPTIONS.category, selectedCategory)\n      .then(markup.renderCategoryBooks);\n  } else {\n    api.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n  }\n}\n\nfunction showMoreCategoryBooks(event) {\n  if (!event.target.classList.contains('top-books-button')) {\n    return;\n  }\n  const category = event.target.dataset.category;\n  api\n    .fetchBookList(api.API_OPTIONS.category, category)\n    .then(markup.renderCategoryBooks);\n}\n\nrefs.ctgList.addEventListener('click', showSelectedCategoryBooks);\nrefs.bookCollectionWrapper.addEventListener('click', showMoreCategoryBooks);\n"],"names":["BASE_URL","API_OPTIONS","fetchBookList","option","select","response","list","error","fetchBookById","bookId","book","api","ctgList","markup","list_name","getRefs","refs","markupCategoryBlock","category","bookCard","markupCategoryCollection","books","insertCategoryBlocks","insertCategoryCollection","insertTopBooksHeader","insertCategoryBooksHeader","words","lastWord","header","cleanBookCollection","renderTopBooks","renderCategoryBooks","showSelectedCategoryBooks","event","selectedCategory","showMoreCategoryBooks"],"mappings":"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"}