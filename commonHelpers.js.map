{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/js/category-sidebar.js","../src/js/content-home.js","../src/js/modal-window.js","../src/js/registration.js","../src/js/scroll-up.js"],"sourcesContent":["const BASE_URL = 'https://books-backend.p.goit.global/books';\n\nconst API_OPTIONS = {\n  list: 'category-list',\n  top: 'top-books',\n  category: 'category?category=',\n};\n\nasync function fetchBookList(option, select = '') {\n  try {\n    const response = await fetch(`${BASE_URL}/${option}${select}`);\n    const list = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return list;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n    alert('An error occurred');\n  }\n}\n\nasync function fetchBookById(bookId) {\n  try {\n    const response = await fetch(`${BASE_URL}/${bookId}`);\n    const book = await response.json();\n    console.log(\n      `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    );\n    return book;\n  } catch (error) {\n    console.log(`An error occurred: ${error.message}`);\n    alert('An error occurred');\n  }\n}\n\nexport default { API_OPTIONS, fetchBookList, fetchBookById };\n","import api from './books-api';\n\nconst ctgList = document.querySelector('.ctg-list');\n\napi.fetchBookList(api.API_OPTIONS.list).then(response => {\n  const markup = response\n    .map(\n      ({\n        list_name,\n      }) => `<li class=\"ctg-item js-ctg-item \" data-ctg-name = ${list_name}>${list_name}\n          </li>`\n    )\n    .join('');\n\n  ctgList.insertAdjacentHTML('beforeend', markup);\n});\n","import api from './books-api';\nimport markup from './markup';\nimport getRefs from './refs';\n\nconst refs = getRefs();\n\napi.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n\nfunction highlightMenuActiveCategory(event) {\n  [...refs.ctgList.children].forEach(li =>\n    li.classList.remove('ctg-item-active')\n  );\n  if (refs.ctgList.contains(event.target)) {\n    event.target.classList.add('ctg-item-active');\n  } else {\n    const match = [...refs.ctgList.children].find(\n      li => li.textContent.trim() === event.target.dataset.category\n    );\n    match.classList.add('ctg-item-active');\n  }\n}\n\nfunction showSelectedCategoryBooks(event) {\n  const selectedCategory = event.target.childNodes[0].data;\n  highlightMenuActiveCategory(event);\n  if (selectedCategory !== 'All categories') {\n    api\n      .fetchBookList(api.API_OPTIONS.category, selectedCategory)\n      .then(markup.renderCategoryBooks);\n  } else {\n    api.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n  }\n}\n\nfunction showMoreCategoryBooks(event) {\n  if (!event.target.classList.contains('top-books-button')) {\n    return;\n  }\n  const category = event.target.dataset.category;\n  highlightMenuActiveCategory(event);\n  api\n    .fetchBookList(api.API_OPTIONS.category, category)\n    .then(markup.renderCategoryBooks);\n}\n\nrefs.ctgList.addEventListener('click', showSelectedCategoryBooks);\nrefs.bookCollectionWrapper.addEventListener('click', showMoreCategoryBooks);\n","import getRefs from './refs';\nimport api from './books-api';\n// import markup from './markup';\n\nconst refs = getRefs();\nconst modal = document.getElementById('bookModal');\nconst modalTitle = document.getElementById('bookModalTitle');\nconst modalBody = document.getElementById('bookModalBody');\nconst addToShoppingListBtn = document.getElementById('addToShoppingList');\nconst modalCloseBtn = document.querySelector('.close');\nconst modalCloseFooterBtn = document.querySelector('.btn-secondary');\n\nlet shoppingList = [];\n\nfunction openModal(bookId) {\n  api.fetchBookById(bookId).then(book => {\n    modalTitle.innerText = book.title;\n    modalTitle.dataset.bookId = bookId; // Додати dataset для збереження bookId\n    modalBody.innerHTML = `\n      <p><strong>Author:</strong> ${book.author}</p>\n      <p><strong>Description:</strong> ${book.description}</p>\n    `;\n    \n    // Перевірити, чи книга вже є в списку покупок\n    if (shoppingList.includes(bookId)) {\n      addToShoppingListBtn.innerText = 'Remove from the shopping list';\n    } else {\n      addToShoppingListBtn.innerText = 'Add to shopping list';\n    }\n\n    modal.classList.add('show');\n    document.body.style.overflow = 'hidden'; // Вимкнути прокручування, коли відкрито вікно\n  });\n}\n\nfunction closeModal() {\n  modal.classList.remove('show');\n  document.body.style.overflow = ''; // Увімкнути прокручування, коли вікно закрито\n}\n\nfunction toggleShoppingList(bookId) {\n  console.log('Toggling shopping list for bookId:', bookId);\n\n  if (!bookId) {\n    console.error('Invalid bookId:', bookId);\n    return;\n  }\n\n  const index = shoppingList.indexOf(bookId);\n  if (index === -1) {\n    shoppingList.push(bookId);\n  } else {\n    shoppingList.splice(index, 1);\n  }\n\n  console.log('Updated shoppingList:', shoppingList);\n\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n\n  if (index === -1) {\n    addToShoppingListBtn.innerText = 'Remove from the shopping list';\n  } else {\n    addToShoppingListBtn.innerText = 'Add to shopping list';\n  }\n}\n\naddToShoppingListBtn.addEventListener('click', () => {\n  const currentBookId = modalTitle.dataset.bookId; // Отримання bookId з dataset\n  toggleShoppingList(currentBookId);\n});\n\nmodal.addEventListener('click', event => {\n  if (event.target === modal) {\n    closeModal();\n  }\n});\n\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n});\n\nrefs.bookCollectionWrapper.addEventListener('click', event => {\n  const bookLink = event.target.closest('.book-link');\n  if (bookLink) {\n    event.preventDefault();\n    const bookId = bookLink.dataset.id;\n\n    // Виклик функції openModal для відображення модального вікна\n    openModal(bookId);\n  }\n});\n\n// Отримати список покупок із локального сховища\nconst savedShoppingList = localStorage.getItem('shoppingList');\nif (savedShoppingList) {\n  shoppingList = JSON.parse(savedShoppingList);\n}\n\nmodalCloseBtn.addEventListener('click', closeModal);\nmodalCloseFooterBtn.addEventListener('click', closeModal);","document.addEventListener('DOMContentLoaded', function () {\n  const signupBtn = document.getElementById('signupBtn');\n  signupBtn.addEventListener('click', openRegistrationModal);\n\n  const errorMessageElement = document.createElement('div');\n  errorMessageElement.style.position = 'fixed';\n  errorMessageElement.style.top = '20px';\n  errorMessageElement.style.right = '20px';\n  errorMessageElement.style.background = 'red';\n  errorMessageElement.style.color = 'white';\n  errorMessageElement.style.padding = '15px';\n  errorMessageElement.style.display = 'none';\n  errorMessageElement.style.zIndex = '1';\n\n  document.body.appendChild(errorMessageElement);\n\n  function openRegistrationModal() {\n    fetch('partials/registration.html')\n      .then(response => response.text())\n      .then(html => {\n        const registrationModalContainer = document.getElementById(\n          'registrationModalContainer'\n        );\n        registrationModalContainer.innerHTML = html;\n\n        const registrationForm = document.getElementById('registrationForm');\n        const closeIcon = document.querySelector('.close-icon');\n\n        registrationForm.addEventListener('submit', function (event) {\n          event.preventDefault();\n\n          const name = document.getElementById('name').value;\n          const email = document.getElementById('email').value;\n          const password = document.getElementById('password').value;\n\n          if (name && email && password) {\n            console.log('User data:', { name, email, password });\n\n            const userData = { name, email, password };\n            localStorage.setItem('userData', JSON.stringify(userData));\n\n            closeRegistrationModal();\n          } else {\n            const missingFields = [];\n            if (!name) missingFields.push('Name');\n            if (!email) missingFields.push('Email');\n            if (!password) missingFields.push('Password');\n\n            errorMessageElement.textContent = `Please fill in the following fields: ${missingFields.join(\n              ', '\n            )}`;\n            errorMessageElement.style.display = 'block';\n\n            setTimeout(function () {\n              errorMessageElement.style.display = 'none';\n            }, 10000);\n          }\n        });\n\n        closeIcon.addEventListener('click', function () {\n          errorMessageElement.style.display = 'none';\n          closeRegistrationModal();\n        });\n      })\n      .catch(error =>\n        console.error('Error loading registration content:', error)\n      );\n  }\n\n  function closeRegistrationModal() {\n    const registrationModalContainer = document.getElementById(\n      'registrationModalContainer'\n    );\n    registrationModalContainer.innerHTML = '';\n  }\n});\n","const goTopBtn = document.querySelector(\".back-to-top\");\n\nwindow.addEventListener(\"scroll\", trackScroll);\ngoTopBtn.addEventListener(\"click\", goTop);\n\nfunction trackScroll() {\n\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    goTopBtn.classList.add(\"back-to-top--show\");\n  } else {\n    goTopBtn.classList.remove(\"back-to-top--show\");\n  }\n}\n\nfunction goTop() {\n\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -25);\n    setTimeout(goTop, 0); \n  }\n}"],"names":["BASE_URL","API_OPTIONS","fetchBookList","option","select","response","list","error","fetchBookById","bookId","book","api","ctgList","markup","list_name","refs","getRefs","highlightMenuActiveCategory","event","li","showSelectedCategoryBooks","selectedCategory","showMoreCategoryBooks","category","modal","modalTitle","modalBody","addToShoppingListBtn","modalCloseBtn","modalCloseFooterBtn","shoppingList","openModal","closeModal","toggleShoppingList","index","currentBookId","bookLink","savedShoppingList","openRegistrationModal","errorMessageElement","html","registrationModalContainer","registrationForm","closeIcon","name","email","password","userData","closeRegistrationModal","missingFields","goTopBtn","trackScroll","goTop","scrolled","coords"],"mappings":"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"}