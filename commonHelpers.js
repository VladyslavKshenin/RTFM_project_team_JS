import{g as A,m as p,a as y,b as O,c as k,d as _,l as M}from"./assets/applebooks@2x-b02de412.js";const b="https://books-backend.p.goit.global/books",P={list:"category-list",top:"top-books",category:"category?category="};async function j(t,e=""){try{const o=await fetch(`${b}/${t}${e}`),s=await o.json();return console.log(`data retrieving was succesfull: ${o.status} - ${o.statusText}`),s}catch(o){console.log(`An error occurred: ${o.message}`),alert("An error occurred")}}async function N(t){try{const e=await fetch(`${b}/${t}`),o=await e.json();return console.log(`data retrieving was succesfull: ${e.status} - ${e.statusText}`),o}catch(e){console.log(`An error occurred: ${e.message}`),alert("An error occurred")}}const n={API_OPTIONS:P,fetchBookList:j,fetchBookById:N},q=document.querySelector(".ctg-list");n.fetchBookList(n.API_OPTIONS.list).then(t=>{const e=t.map(({list_name:o})=>`<li class="ctg-item js-ctg-item " data-ctg-name = ${o}>${o}
          </li>`).join("");q.insertAdjacentHTML("beforeend",e)});const d=A();n.fetchBookList(n.API_OPTIONS.top).then(p.renderTopBooks);function L(t){[...d.ctgList.children].forEach(e=>e.classList.remove("ctg-item-active")),d.ctgList.contains(t.target)?t.target.classList.add("ctg-item-active"):[...d.ctgList.children].find(o=>o.textContent.trim()===t.target.dataset.category).classList.add("ctg-item-active")}function z(t){const e=t.target.childNodes[0].data;L(t),e!=="All categories"?n.fetchBookList(n.API_OPTIONS.category,e).then(p.renderCategoryBooks):n.fetchBookList(n.API_OPTIONS.top).then(p.renderTopBooks)}function R(t){if(!t.target.classList.contains("top-books-button"))return;const e=t.target.dataset.category;L(t),n.fetchBookList(n.API_OPTIONS.category,e).then(p.renderCategoryBooks)}d.ctgList.addEventListener("click",z);d.bookCollectionWrapper.addEventListener("click",R);const v="shoppingList",D=document.querySelector(".book-collection-wrapper");let i,r,a;D.addEventListener("click",async t=>{const e=t.target.closest(".book-link");if(e){t.preventDefault();const o=e.dataset.id;try{const s=await n.fetchBookById(o);H(s)}catch(s){console.error("Error fetching book details:",s)}}});function H(t){i=document.createElement("div"),r=document.createElement("div"),i.classList.add("backdrop","visually-hidden"),r.classList.add("modal-wrapper","visually-hidden"),r.innerHTML=`<div class="book-modal">
            <img src="${t.book_image}" alt="${t.title}" class="book-modal-img"/>
            <div class="book-modal-details">
                <h2 class="book-modal-title">${t.title}</h2>
                <h3 class="book-modal-author">${t.author}</h3>
                <p class="book-modal-desc">${t.description}</p>
                <ul class="icon-book-modal-list">
                    <li>
                        <a href="${t.buy_links[0].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-amazon" srcset="${y} 1x, ${O} 2x" src="${y}" alt="Amazon" loading="lazy"/>
                        </a>
                    </li>
                    <li>
                        <a href="${t.buy_links[1].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-ibooks" srcset="${k} 1x, ${_} 2x" src="${k}" alt="Apple books" loading="lazy"/>
                        </a>
                    </li>
                </ul>
            </div>
            <button class='book-modal-btn js-add' id='js-book-modal-btn'>Add to shopping list</button>
            <p class='book-modal-buy'>Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>
            <button class='book-modal-close' id='js-book-modal-btn-close'>
                <svg class='icon-book-modal-close'><use href='${M}#x-close'></use></svg>
            </button>
        </div>`,document.body.appendChild(i),document.body.appendChild(r),i.classList.remove("visually-hidden"),r.classList.remove("visually-hidden");const e=document.querySelector("#js-book-modal-btn-close");console.log("вбийте мене",e),e&&e.addEventListener("click",()=>{h()}),a=document.querySelector("#js-book-modal-btn"),console.log("це капець",a),a.c&&a.addEventListener("click",()=>{}),E(!0),document.addEventListener("keydown",B),i.addEventListener("click",w)}function E(t){t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open")}function B(t){t.key==="Escape"&&h()}function w(t){t.target===i&&h()}function h(){i.classList.add("visually-hidden"),r.classList.add("visually-hidden"),E(!1),document.removeEventListener("keydown",B),i.removeEventListener("click",w),a&&a.removeEventListener("click",I)}function I(){W(book),a&&a.removeEventListener("click",I)}function W(t){const e=F(),o=e.findIndex(s=>s.id===t._id);o!==-1?e.splice(o,1):e.push({id:t._id,image:t.book_image,title:t.title,author:t.author,description:t.description,buy_links:t.buy_links}),Y(e),J(t)}function F(){const t=localStorage.getItem(v);return t?JSON.parse(t):[]}function Y(t){localStorage.setItem(v,JSON.stringify(t))}function J(t){const e=document.querySelector("#js-book-modal-btn");console.log("updateTextBtn addBtn",e);const o=document.querySelector(".book-modal-buy");if(e&&o){const s=s(t);s?(e.textContent="Remove from the shopping list",o.style.display="block"):(e.textContent="Add to shopping list",o.style.display="none")}}document.addEventListener("DOMContentLoaded",function(){document.getElementById("signupBtn").addEventListener("click",o);const e=document.createElement("div");e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.background="red",e.style.color="white",e.style.padding="15px",e.style.display="none",e.style.zIndex="1",document.body.appendChild(e);function o(){fetch("partials/registration.html").then(c=>c.text()).then(c=>{const $=document.getElementById("registrationModalContainer");$.innerHTML=c;const x=document.getElementById("registrationForm"),C=document.querySelector(".close-icon");x.addEventListener("submit",function(T){T.preventDefault();const u=document.getElementById("name").value,g=document.getElementById("email").value,m=document.getElementById("password").value;if(u&&g&&m){console.log("User data:",{name:u,email:g,password:m});const l={name:u,email:g,password:m};localStorage.setItem("userData",JSON.stringify(l)),s()}else{const l=[];u||l.push("Name"),g||l.push("Email"),m||l.push("Password"),e.textContent=`Please fill in the following fields: ${l.join(", ")}`,e.style.display="block",setTimeout(function(){e.style.display="none"},1e4)}}),C.addEventListener("click",function(){e.style.display="none",s()})}).catch(c=>console.error("Error loading registration content:",c))}function s(){const c=document.getElementById("registrationModalContainer");c.innerHTML=""}});const f=document.querySelector(".back-to-top");window.addEventListener("scroll",K);f.addEventListener("click",S);function K(){const t=window.pageYOffset,e=document.documentElement.clientHeight;t>e?f.classList.add("back-to-top--show"):f.classList.remove("back-to-top--show")}function S(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(S,0))}
//# sourceMappingURL=commonHelpers.js.map
